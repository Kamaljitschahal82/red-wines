TITLE by YOUR_NAME_HERE
========================================================

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using
# in your analysis in this code chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.
# You should set echo=FALSE for all code chunks in your file.

library(ggplot2)
library(plyr)
library(gridExtra)
```

```{r echo=FALSE, Load_the_Data}
# Load the Data
setwd("E:/Dropbox/estudios/dataAnalyst/p4/p4_explore")
reds <- read.csv('wineQualityReds.csv')
```

# Data Description Section
```{r}
names(reds)
```

The variable "X" is not mentioned in the text file describing the dataset. A quick look at the dataframe reveals that it is just a unique id for every observation. It may be useful later, so we can keep it but change the name in order to avoid confusion.

```{r}
reds <- plyr::rename(reds, c("X"="id"))
str(reds)
```

```{r}
reds$quality <- factor(reds$quality)
```


It looks like all free.sulfur.dioxide and total.sulfur.dioxide values are whole numbers. It turns out this is true except for a few cases within each variable, all of them having exactly half a unit more:

```{r}
with(reds, subset(free.sulfur.dioxide, free.sulfur.dioxide %% 1 != 0))
with(reds, subset(total.sulfur.dioxide, total.sulfur.dioxide %% 1 != 0))
```

My guess is that this is due to these two variables being measured in (mg / dm^3), while the rest are in (g / dm^3). I suppose that more precision is not needed and/or impossible to measure with the available resources.

```{r}
summary(reds)
```

There are some variables with possible outliers: volatile.acidity, citric.acid, residual.sugar, chlorides, free and total.sulfur.dioxide and sulphates have maximum valures that are far away from the third quartile.

# Univariate Plots Section
```{r echo=FALSE, Univariate_Plots}
ggplot(data = reds, aes(x = fixed.acidity)) +
  geom_histogram(binwidth = 0.5) +
  scale_x_continuous(breaks = seq(4, 16, 1), limits = c(4, 16))
```

```{r}
ggplot(data = reds, aes(x = volatile.acidity)) +
  geom_histogram(binwidth = 0.05) +
  scale_x_continuous(breaks = seq(0, 2, 0.1), limits = c(0, 2))
```

The variables fixed.acidity and volatile.acidity look normally distributed.


```{r}
c1 <- ggplot(data = reds, aes(x = citric.acid)) +
  geom_histogram(binwidth = 0.05) +
  scale_x_continuous(breaks = seq(0, 1.2, 0.1), limits = c(0, 1.2))

c2 <- ggplot(data = reds, aes(x = citric.acid)) +
  geom_histogram(binwidth = 0.05) +
  scale_x_log10(breaks = seq(0, 1.2, 0.1))

grid.arrange(c1, c2, ncol=1)
```

The variable citric.acid is very skewed to the right. The log transform shows a peak between 0.4 and 0.6.


```{r}
r1 <- ggplot(data = reds, aes(x = residual.sugar)) +
  geom_histogram(binwidth = 0.1)

r2 <- ggplot(data = reds, aes(x = residual.sugar)) +
  geom_histogram(binwidth = 0.1) +
  scale_x_continuous(breaks = seq(0, 3.5, 0.5), limits = c(0, 3.5))

grid.arrange(r1, r2, ncol=1)
```

```{r}
ch1 <- ggplot(data = reds, aes(x = chlorides)) +
  geom_histogram(binwidth = 0.005)

ch2 <- ggplot(data = reds, aes(x = chlorides)) +
  geom_histogram(binwidth = 0.005) +
  scale_x_continuous(breaks = seq(0, 0.15, 0.05), limits = c(0, 0.15))

grid.arrange(ch1, ch2, ncol=1)
```

The variables residual.sugar and chlorides look normally distributed, but both have very distant outliers. 

```{r}
fsd1 <- ggplot(data = reds, aes(x = free.sulfur.dioxide)) +
  geom_histogram(binwidth = 1) +
  scale_x_continuous(breaks = seq(0, 80, 5))

fsd2 <- ggplot(data = reds, aes(x = free.sulfur.dioxide)) +
  geom_histogram(binwidth = 0.1) +
  scale_x_log10(breaks = seq(0, 80, 10))

grid.arrange(fsd1, fsd2, ncol=1)
```

```{r}
tsd1 <- ggplot(data = reds, aes(x = total.sulfur.dioxide)) +
  geom_histogram(binwidth = 5) +
  scale_x_continuous(breaks = seq(0, 290, 10))

tsd2 <- ggplot(data = reds, aes(x = total.sulfur.dioxide)) +
  geom_histogram(binwidth = 0.1) +
  scale_x_log10(breaks = seq(0, 290, 25))

grid.arrange(tsd1, tsd2, ncol=1)
```

Both free.sulfur.dioxide and total.sulfur.dioxide are skewed to the right. The last has very distant outliers. They look normally distributed when a log-transform is applied.

```{r}
ggplot(data = reds, aes(x = density)) +
  geom_histogram(binwidth = 0.0005)
```

```{r}
ggplot(data = reds, aes(x = pH)) +
  geom_histogram(binwidth = 0.05)
```

Both density and pH look normally distributed.

```{r}
ggplot(data = reds, aes(x = sulphates)) +
  geom_histogram(binwidth = 0.05)
```

The variable sulphates look normally distributed, with some outliers.

```{r}
a1 <- ggplot(data = reds, aes(x = alcohol)) +
  geom_histogram(binwidth = 0.1)

a2 <- ggplot(data = reds, aes(x = alcohol)) +
  geom_histogram(binwidth = 0.01) +
  scale_x_log10()

grid.arrange(a1, a2, ncol=1)
```

The variable alcohol is skewed to the right. Applying a log-transform does not change much.

```{r}
ggplot(data = reds, aes(x = quality)) +
  geom_bar() +
  scale_x_discrete(breaks = seq(0, 10, 1))
```

An overwhelming majority of wines, about 1300 of the total 1599, are rated 5 or 6, and about 200 are rated 7. The rest are rated 3, 4 or 8.

# Univariate Analysis

### What is the structure of your dataset?

There are 1599 red wines in the dataset with 12 features and an identifier number. Except quality, which is discrete, the rest of the features are continuous, althogh most of the values of free.sulfur.dioxide and total.sulfur.dioxide are whole.

### What is/are the main feature(s) of interest in your dataset?

The main feature is quality. I would like to know if and which ones of the other features can help determine the quality of a red wine.

### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?

The info provided by the authors of the dataset gives a few tips about which variables can affect the quality of the wine (volatile acidity, the combination of free and total sulfur dioxide, sulphates...) but it is far from comprehensive.

Given that most wines are rated of medium quality (5 or 6 in a scale of 0 to 10), and the fact that there are several variables with very distant outliers, points me to think that very small or very large values of certain variables are fundamental in the creation of non-average wines.

### Did you create any new variables from existing variables in the dataset?

### Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?

There were some right-skewed distributions. I applied a log-transform to get better insights about the distributions.

Several variables had large outliers. I created a cropped version of some of them to have more details of the bulk of the data.



# Bivariate Plots Section

```{r echo=FALSE, Bivariate_Plots}
library(ggplot2)
library(GGally)
library(scales)
library(memisc)

ggpairs(subset(reds, select = -id), 
  lower = list(continuous = wrap("points", shape = I('.'))), 
  upper = list(combo = wrap("box", outlier.shape = I('.'))))
```

The boxplots in the matrix show correlations between quality and other variables: volatile.acidity, citric.acid, sulphates and alcohol. The variables density and pH might be related too, but this could be because these variables are correlated with others: pH with citric.acid and density with alcohol and citric.acid.

We are going to look closer into all this.

```{r}
ggplot(data = reds, aes(y = volatile.acidity, x = quality)) +
  geom_boxplot()
```

It looks like as volatile acidity increases, quality decreases, although there are two observations worth mentioning:
- Wines with a quality score of 7 and 8 (the best of the dataset) have similar median volatile acidity. However, the volatile acidity of wines with a quality of 7 is more dispersed.
- Outliers in wines with a quality of 7 and 8 have a volatile acidity similar to the median of the worst rated wines (score of 3): volatile acidity alone cannot explain the differences in quality.

These findings agree with the information provided by the authors of the dataset: "too high levels can lead to an unpleasant, vinegar taste".

# Bivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?

### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?

### What was the strongest relationship you found?




# Multivariate Plots Section

```{r echo=FALSE, Multivariate_Plots}

```

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the strengths and limitations of your model.

------

# Final Plots and Summary

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection
